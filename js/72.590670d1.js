"use strict";(self["webpackChunkdiploma"]=self["webpackChunkdiploma"]||[]).push([[72],{6072:function(s,t,e){e.r(t),e.d(t,{default:function(){return y}});var a=e(641);const o={class:"entry"};function n(s,t,e,n,r,i){const l=(0,a.g2)("EntryForm");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.bF)(l)])}var r=e(3751),i=e(33);const l={class:"entry-container"},d={class:"login"},u={class:"field"},c={class:"field"},p=["disabled"],h={class:"register"};function g(s,t,e,o,n,g){const k=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",l,[t[0]||((0,a.Vq)(-1,!0),(t[0]=(0,a.Lk)("p",{class:"title"},[t[5]||(t[5]=(0,a.eW)(" войдите, чтоб совершать покупки и просматривать историю заказов "))])).cacheIndex=0,(0,a.Vq)(1),t[0]),(0,a.Lk)("div",d,[t[1]||((0,a.Vq)(-1,!0),(t[1]=(0,a.Lk)("h1",null,[t[6]||(t[6]=(0,a.eW)("ВХОД"))])).cacheIndex=1,(0,a.Vq)(1),t[1]),(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,r.D$)(((...s)=>g.onLogin&&g.onLogin(...s)),["prevent"]))},[(0,a.Lk)("div",u,[t[7]||(t[7]=(0,a.Lk)("label",{for:"username"},"*Имя:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.Firstname=s),type:"text",id:"username",required:""},null,512),[[r.Jo,n.Firstname]])]),(0,a.Lk)("div",c,[t[8]||(t[8]=(0,a.Lk)("label",{for:"password"},"*Пароль:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.password=s),type:"password",id:"password",required:""},null,512),[[r.Jo,n.password]])]),(0,a.Lk)("button",{type:"submit",disabled:n.loading},(0,i.v_)(n.loading?"Загрузка...":"Войти"),9,p),t[9]||(t[9]=(0,a.Lk)("p",{class:"or"},"или",-1)),(0,a.Lk)("button",h,[(0,a.bF)(k,{to:"/register"},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(n.loading?"Загрузка...":"Зарегистрироваться"),1)])),_:1})])],32),t[10]||(t[10]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("h2",{class:(0,i.C4)(n.statusClass)},(0,i.v_)(n.statusMessage),3)])])}e(4114);var k={data(){return{Firstname:"",password:"",loading:!1,statusMessage:"",statusClass:""}},methods:{async onLogin(){this.loading=!0,this.statusMessage="";try{const s=await fetch("https://faa45a9033a909b4.mokky.dev/auth",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({firstName:this.Firstname,password:this.password})}),t=await s.json();if(s.ok)if(console.log("Ответ от сервера:",t),t.data&&t.data.id){const s=t.data.id.toString();console.log("ID получен:",s),sessionStorage.setItem("userId",s),this.statusMessage="Успешно вошли!",this.statusClass="success",this.$router.push({name:"profile"})}else console.error("ID пользователя отсутствует в ответе:",t),this.statusMessage="Не удалось войти. Проверьте имя пользователя и пароль.",this.statusClass="error";else this.statusMessage=t.message||"Не удалось войти. Проверьте имя пользователя и пароль.",this.statusClass="error"}catch(s){console.error("Ошибка:",s),this.statusMessage="Произошла ошибка при входе.",this.statusClass="error"}finally{this.loading=!1}}}},m=e(6262);const f=(0,m.A)(k,[["render",g],["__scopeId","data-v-4389536e"]]);var L=f,b={name:"EntryView",components:{EntryForm:L}};const v=(0,m.A)(b,[["render",n]]);var y=v}}]);
//# sourceMappingURL=72.590670d1.js.map