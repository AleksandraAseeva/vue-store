{"version":3,"file":"js/72.590670d1.js","mappings":"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","sources":["webpack://diploma/./src/views/EntryView.vue","webpack://diploma/./src/components/EntryComponent/EntryForm.vue","webpack://diploma/./src/components/EntryComponent/EntryForm.vue?7836","webpack://diploma/./src/views/EntryView.vue?273a"],"sourcesContent":["<template>\r\n  <div class=\"entry\">\r\n    <EntryForm/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport EntryForm from '@/components/EntryComponent/EntryForm.vue'\r\n\r\nexport default {\r\n  name: 'EntryView',\r\n  components: {\r\n   EntryForm\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <div class=\"entry-container\">\r\n    <p v-once class=\"title\">\r\n      войдите, чтоб совершать покупки и просматривать историю заказов\r\n    </p>\r\n    <div class=\"login\">\r\n      <h1 v-once>ВХОД</h1>\r\n      <form @submit.prevent=\"onLogin\">\r\n        <div class=\"field\">\r\n          <label for=\"username\">*Имя:</label>\r\n          <input v-model=\"Firstname\" type=\"text\" id=\"username\" required />\r\n        </div>\r\n\r\n        <div class=\"field\">\r\n          <label for=\"password\">*Пароль:</label>\r\n          <input v-model=\"password\" type=\"password\" id=\"password\" required />\r\n        </div>\r\n\r\n        <button type=\"submit\" :disabled=\"loading\">\r\n          {{ loading ? \"Загрузка...\" : \"Войти\" }}\r\n        </button>\r\n\r\n        <p class=\"or\">или</p>\r\n\r\n        <button class=\"register\">\r\n          \r\n          <router-link to=\"/register\">{{ loading ? \"Загрузка...\" : \"Зарегистрироваться\" }}</router-link>\r\n        </button>\r\n      </form>\r\n\r\n      <hr />\r\n\r\n      <h2 :class=\"statusClass\">{{ statusMessage }}</h2>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      Firstname: \"\",\r\n      password: \"\",\r\n      loading: false,\r\n      statusMessage: \"\",\r\n      statusClass: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    async onLogin() {\r\n      this.loading = true;\r\n      this.statusMessage = \"\";\r\n\r\n      try {\r\n        const res = await fetch(\"https://faa45a9033a909b4.mokky.dev/auth\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            firstName: this.Firstname,\r\n            password: this.password,\r\n          }),\r\n        });\r\n\r\n        const json = await res.json();\r\n        if (res.ok) {\r\n          console.log(\"Ответ от сервера:\", json);\r\n\r\n          if (json.data && json.data.id) {\r\n            const id = json.data.id.toString();\r\n            console.log(\"ID получен:\", id);\r\n\r\n            sessionStorage.setItem(\"userId\", id);\r\n\r\n            this.statusMessage = \"Успешно вошли!\";\r\n            this.statusClass = \"success\";\r\n\r\n            this.$router.push({ name: \"profile\" });\r\n          } else {\r\n            console.error(\"ID пользователя отсутствует в ответе:\", json);\r\n            this.statusMessage =\r\n              \"Не удалось войти. Проверьте имя пользователя и пароль.\";\r\n            this.statusClass = \"error\";\r\n          }\r\n        } else {\r\n          this.statusMessage =\r\n            json.message ||\r\n            \"Не удалось войти. Проверьте имя пользователя и пароль.\";\r\n          this.statusClass = \"error\";\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Ошибка:\", error);\r\n        this.statusMessage = \"Произошла ошибка при входе.\";\r\n        this.statusClass = \"error\";\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.entry-container {\r\n  padding-bottom: 1rem;\r\n}\r\n\r\n.title {\r\n  padding-top: 1rem;\r\n  color: var(--color-primary);\r\n}\r\n\r\n.login {\r\n  max-width: 25rem;\r\n  margin: 0.8rem auto;\r\n  padding: 1rem;\r\n  border: 0.0625rem solid var(--color-disabled);\r\n  background-color: var(--color-background);\r\n}\r\n\r\n.field {\r\n  margin-bottom: 0.9375rem;\r\n  color: rgb(140, 140, 140);\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.field label {\r\n  display: block;\r\n  margin-bottom: 0.3125rem;\r\n  text-align: left;\r\n}\r\n\r\n.field input {\r\n  width: calc(100% - 1.6rem);\r\n  padding: 0.8rem;\r\n  border: 0.0625rem solid var(--color-disabled);\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.field input:hover {\r\n  border: 0.0625rem solid var(--color-primary);\r\n}\r\n\r\n.or {\r\n  margin: 0.8rem;\r\n  color: rgb(140, 140, 140);\r\n}\r\n\r\nbutton {\r\n  padding: 0.8rem;\r\n  background-color: var(--color-primary);\r\n  color: var(--color-text);\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  width: 100%;\r\n}\r\n\r\n.register a {\r\n  color: var(--color-text);\r\n}\r\n\r\nbutton:disabled {\r\n  background-color: var(--color-disabled);\r\n}\r\n\r\nh2 {\r\n  margin-top: 0.625rem;\r\n}\r\n\r\n.success {\r\n  color: green;\r\n}\r\n\r\n.error {\r\n  color: red;\r\n}\r\n</style>\r\n","import { render } from \"./EntryForm.vue?vue&type=template&id=4389536e&scoped=true\"\nimport script from \"./EntryForm.vue?vue&type=script&lang=js\"\nexport * from \"./EntryForm.vue?vue&type=script&lang=js\"\n\nimport \"./EntryForm.vue?vue&type=style&index=0&id=4389536e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4389536e\"]])\n\nexport default __exports__","import { render } from \"./EntryView.vue?vue&type=template&id=b0e517d0\"\nimport script from \"./EntryView.vue?vue&type=script&lang=js\"\nexport * from \"./EntryView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_EntryForm","_createElementVNode","_createTextVNode","_hoisted_2","onSubmit","_cache","_withModifiers","args","$options","onLogin","_hoisted_3","for","$event","$data","Firstname","type","id","required","_hoisted_4","password","disabled","loading","_hoisted_5","_hoisted_6","_component_router_link","to","default","_withCtx","_toDisplayString","_","_normalizeClass","statusClass","statusMessage","data","methods","this","res","fetch","method","headers","Accept","body","JSON","stringify","firstName","json","ok","console","log","toString","sessionStorage","setItem","$router","push","name","error","message","__exports__","components","EntryForm","render"],"sourceRoot":""}