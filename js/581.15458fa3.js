"use strict";(self["webpackChunkdiploma"]=self["webpackChunkdiploma"]||[]).push([[581],{9581:function(s,e,a){a.r(e),a.d(e,{default:function(){return V}});var t=a(641);const r={class:"redister"};function o(s,e,a,o,i,l){const d=(0,t.g2)("RegisterForm");return(0,t.uX)(),(0,t.CE)("div",r,[(0,t.bF)(d)])}var i=a(3751),l=a(33);const d={class:"register"},n={class:"field"},u={class:"field"},p={class:"field"},c={key:0,class:"error-message",style:{color:"#b1b1b1"}},m={key:1,style:{color:"#b1b1b1"}},h={class:"field"},k=["disabled"],f={id:"jsonPre"};function b(s,e,a,r,o,b){return(0,t.uX)(),(0,t.CE)("div",d,[(0,t.Lk)("form",{onSubmit:e[9]||(e[9]=(0,i.D$)(((...s)=>b.onSubmit&&b.onSubmit(...s)),["prevent"]))},[(0,t.Lk)("div",n,[e[0]||((0,t.Vq)(-1,!0),(e[0]=(0,t.Lk)("div",null,[e[10]||(e[10]=(0,t.Lk)("label",{for:"firstName"},"Ваше имя:",-1))])).cacheIndex=0,(0,t.Vq)(1),e[0]),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.firstName=s),type:"text",id:"firstlName",required:""},null,512),[[i.Jo,o.firstName]])]),(0,t.Lk)("div",u,[e[2]||((0,t.Vq)(-1,!0),(e[2]=(0,t.Lk)("div",null,[e[11]||(e[11]=(0,t.Lk)("label",{for:"lastName"},"Ваша фамилия:",-1))])).cacheIndex=2,(0,t.Vq)(1),e[2]),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.lastName=s),type:"text",id:"lastName",required:""},null,512),[[i.Jo,o.lastName]])]),(0,t.Lk)("div",p,[e[4]||((0,t.Vq)(-1,!0),(e[4]=(0,t.Lk)("div",null,[e[12]||(e[12]=(0,t.Lk)("label",{for:"password"},"Пароль:",-1))])).cacheIndex=4,(0,t.Vq)(1),e[4]),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.password=s),type:"password",id:"password",required:"",onInput:e[6]||(e[6]=(...s)=>b.validatePassword&&b.validatePassword(...s))},null,544),[[i.Jo,o.password]]),o.passwordError?((0,t.uX)(),(0,t.CE)("p",c,(0,l.v_)(o.passwordError),1)):((0,t.uX)(),(0,t.CE)("p",m,"Принято, кэп"))]),(0,t.Lk)("div",h,[e[7]||((0,t.Vq)(-1,!0),(e[7]=(0,t.Lk)("div",null,[e[13]||(e[13]=(0,t.Lk)("label",{for:"email"},"Почта:",-1))])).cacheIndex=7,(0,t.Vq)(1),e[7]),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.email=s),type:"email",id:"email",required:""},null,512),[[i.Jo,o.email]])]),(0,t.Lk)("button",{type:"submit",disabled:o.loading},(0,l.v_)(o.loading?"Загрузка...":"Зарегистрироваться"),9,k)],32),e[14]||(e[14]=(0,t.Lk)("hr",null,null,-1)),(0,t.Lk)("h2",{class:(0,l.C4)(o.statusClass)},(0,l.v_)(o.statusMessage),3),(0,t.Lk)("pre",f,(0,l.v_)(o.responseJson),1)])}a(4114);var v=a(6278),w={computed:{...(0,v.aH)(["cart"])},data(){return{firstName:"",lastName:"",email:"",password:"",loading:!1,statusMessage:"",statusClass:"",responseJson:"",passwordError:""}},methods:{async onSubmit(){if(this.passwordError)return this.statusMessage="Исправьте ошибки в пароле.",void(this.statusClass="error");this.loading=!0,this.statusMessage="";try{const s=await fetch("https://faa45a9033a909b4.mokky.dev/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({firstName:this.firstName,lastName:this.lastName,email:this.email,password:this.password,items:this.cart})}),e=await s.json();if(this.responseJson=JSON.stringify(e,null,2),this.updateStatus(s.ok,e),s.ok){const s=e.token;localStorage.setItem("authToken",s),this.$router.push({name:"entry"})}}catch(s){console.error("Ошибка:",s)}finally{this.loading=!1}},updateStatus(s,e){s?(this.statusMessage="Успешно!",this.statusClass="success"):(this.statusMessage="Не зарегистрирован!",this.statusClass="error")},validatePassword(){const s=/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/;s.test(this.password)?this.passwordError="":this.passwordError="Пароль должен содержать минимум 8 символов, включая буквы, цифры и специальные символы."}}},g=a(6262);const L=(0,g.A)(w,[["render",b],["__scopeId","data-v-a29ad8cc"]]);var y=L,N={name:"RegisterView",components:{RegisterForm:y}};const C=(0,g.A)(N,[["render",o],["__scopeId","data-v-97735b30"]]);var V=C}}]);
//# sourceMappingURL=581.15458fa3.js.map